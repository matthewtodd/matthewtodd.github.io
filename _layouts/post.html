<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="/css/syntax.css" type="text/css" media="screen" />
    <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="http://feeds.feedburner.com/matthewtodd_org" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="openid.server" href="http://www.myopenid.com/server" />
    <link rel="openid.delegate" href="http://matthewtodd.myopenid.com/" />
    <meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=matthewtodd.myopenid.com" />
  </head>
  
  <body>
    <div id="container">

    <div id="header">
    	<h1><a href="/">Matthew Todd</a></h1>
    	<h2>Software development and life in Moshi, Tanzania</h2>
    </div>

    <div id="page">
      <div id="content">
        <div class="atomentry">
          <h2 class="title">
            {{ page.title }}
          </h2>

      		<p class="author">
      		  Posted on <abbr class="published"><span class="posted_date">{{ page.date | date: "%B %e, %Y"}}</span></abbr>
          </p>

          <div class="content">
            {{ content }}
          </div>
        </div>
      </div>
      
      <div id="sidebar">
        <ul>
          <li>
            <p><img src="/images/matthewtodd.jpg" width="150" height="165" style="border: 1px solid black" /></p>
          </li>

          <li>
            <h2>About</h2>
            <p>
              Valerie and I live in <a href="http://maps.google.com/maps?q=moshi+tz&amp;z=5">Moshi, Tanzania</a>, 
              at the base of Mt. Kilimanjaro. She's the director of <a href="http://amanikids.org/">Amani Children's 
              Home</a>, and I'm consulting here and there. <script type="text/javascript">eval(unescape('%64%6f%63%75%6d%65%6e%74%2e%77%72%69%74%65%28%27%3c%61%20%68%72%65%66%3d%22%6d%61%69%6c%74%6f%3a%6d%61%74%74%68%65%77%2e%74%6f%64%64%40%67%6d%61%69%6c%2e%63%6f%6d%22%3e%45%6d%61%69%6c%3c%2f%61%3e%27%29%3b'))</script>'s
              a good way to reach me, if you need.
            </p>
          </li>

          <li>
            <h2 class="widgettitle">Presently</h2>
            <ul id="twitter_update_list">
              <li>Loading Twitter status&hellip;</li>
            </ul>
          </li>

          <li>
            <h2>Subscribe</h2>
            <p><a href="http://feeds.feedburner.com/matthewtodd_org"><img src="http://feeds.feedburner.com/~fc/matthewtodd_org?bg=993300&amp;fg=ffffff&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></p>
          </li>

          <li>
            <h2>GitHub</h2>
            <ul id="github_repository_list">
              <li>Loading GitHub repositories&hellip;</li>
            </ul>
          </li>          
        </ul>

        <script type="text/javascript">
          function githubCallback(data) {
            var repositories = data.user.repositories;
            var repositoryFragments = new Array(repositories.length);
            for (var i=0; i < repositories.length; i++) {
              repositoryFragments[i] = "<li><a href=\"" + repositories[i].url + "\">" + repositories[i].name + "</a></li>";
            }
            document.getElementById("github_repository_list").innerHTML = repositoryFragments.sort().join("");
          }

          function twitterCallback(tweets) {
            var tweetFragments = new Array(tweets.length);
            for (var i=0; i < tweets.length; i++) {
              tweetFragments[i] = "<li>" + tweets[i].text + " <a href=\"http://twitter.com/" + tweets[i].user.screen_name + "/statuses/" + tweets[i].id + "\">" + relativeTime(tweets[i].created_at) + "</a></li>";
            }
            document.getElementById("twitter_update_list").innerHTML = tweetFragments.join("");
          }

          function relativeTime(time_value) {
            var values = time_value.split(" ");
            time_value = values[1] + " " + values[2] + ", " + values[5] + " " + values[3];
            var parsed_date = Date.parse(time_value);
            var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
            var delta = parseInt((relative_to.getTime() - parsed_date) / 1000);
            delta = delta + (relative_to.getTimezoneOffset() * 60);

            if (delta < 60) {
              return "less than a minute ago";
            } else if(delta < 120) {
              return "about a minute ago";
            } else if(delta < (60*60)) {
              return (parseInt(delta / 60)).toString() + " minutes ago";
            } else if(delta < (120*60)) {
              return "about an hour ago";
            } else if(delta < (24*60*60)) {
              return "about " + (parseInt(delta / 3600)).toString() + " hours ago";
            } else if(delta < (48*60*60)) {
              return "1 day ago";
            } else {
              return (parseInt(delta / 86400)).toString() + " days ago";
            }
          }
        </script>

        <script type="text/javascript" src="http://github.com/api/v1/json/matthewtodd?callback=githubCallback"></script>
        <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/matthewtodd.json?callback=twitterCallback&amp;count=1"></script>
      </div>
    </div>
    
    <div id="footer">
    	<p><a href="http://matthewtodd.org">Matthew Todd</a></p>
    </div>
  </body>
</html>